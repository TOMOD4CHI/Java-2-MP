<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.util.*?>
<?import javafx.scene.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.text.*?>
<?import javafx.scene.shape.*?>
<?import javafx.geometry.*?>
<?import javafx.scene.effect.*?>

<StackPane xmlns="http://javafx.com/javafx"
          xmlns:fx="http://javafx.com/fxml"
          fx:controller="org.cpi2.controllers.AfficherCandidat"
           stylesheets="@/css/candidate-details.css"
          prefHeight="600.0" prefWidth="1000.0" styleClass="main-background">
    
    <!-- Simple background -->
    <Rectangle width="1000" height="700" fill="#f0f4fa"/>
    
    <BorderPane styleClass="glass-container">
        <top>
            <HBox styleClass="glass-header" alignment="CENTER_LEFT" spacing="20">
                <padding>
                    <Insets top="15" right="20" bottom="15" left="20"/>
                </padding>
                <HBox alignment="CENTER_LEFT" spacing="10" styleClass="title-container">

                    <Label text="Dossiers des Candidats" styleClass="page-title">
                        <font>
                            <Font name="System Bold" size="18"/>
                        </font>
                    </Label>
                </HBox>
                <Region HBox.hgrow="ALWAYS"/>
                <HBox styleClass="search-container" alignment="CENTER">
                    <TextField fx:id="searchField" promptText="Rechercher un candidat..." prefWidth="250" styleClass="glass-search"/>
                    <Button styleClass="search-button">
                        <graphic>
                            <Label text="🔍" styleClass="search-icon"/>
                        </graphic>
                    </Button>
                </HBox>
                <Button text="Rafraîchir" onAction="#loadCandidats" styleClass="glass-button">
                    <graphic>
                        <Label text="⟳" styleClass="refresh-icon"/>
                    </graphic>
                </Button>
            </HBox>
        </top>

    <center>
        <SplitPane dividerPositions="0.3" styleClass="glass-content" VBox.vgrow="ALWAYS">

            <!-- Left Panel: Liste des Candidats -->
            <VBox styleClass="glass-panel" spacing="15">
                <padding>
                    <Insets top="0" right="15" bottom="15" left="15"/>
                </padding>

                <HBox alignment="CENTER_LEFT" spacing="10" styleClass="panel-header">
                    <Label text="👥" styleClass="header-icon"/>
                    <Label text="Liste des Candidats" styleClass="panel-title">
                        <font>
                            <Font name="System Bold" size="14"/>
                        </font>
                    </Label>
                </HBox>

                <Separator styleClass="glass-separator"/>

                <ListView fx:id="candidatListView" VBox.vgrow="ALWAYS" styleClass="glass-list-view"/>
            </VBox>

            <!-- Right Panel: Détails et Documents -->
            <ScrollPane fitToWidth="true" styleClass="glass-scroll-pane">
                <VBox fx:id="detailsContainer" styleClass="glass-details-panel" spacing="20">
                    <padding>
                        <Insets top="20" right="20" bottom="20" left="20"/>
                    </padding>

                    <!-- Personal Info Card (Profile Style) -->
                    <VBox styleClass="profile-card" spacing="0">
                        <!-- Banner Area -->
                        <StackPane styleClass="profile-banner">
                            <Rectangle  height="80" styleClass="profile-banner-bg"/>
                        </StackPane>
                        
                        <!-- Profile Section -->
                        <HBox styleClass="profile-section">
                            <!-- Avatar with Status -->
                            <StackPane styleClass="profile-avatar-container">
                                <Circle radius="40" styleClass="profile-avatar-circle"/>
                                <ImageView fx:id="candidatPhoto" fitWidth="75" fitHeight="75" preserveRatio="true" styleClass="profile-avatar-image"/>
                                <StackPane styleClass="profile-status-indicator" StackPane.alignment="BOTTOM_RIGHT">
                                    <Circle radius="8" styleClass="profile-status-circle"/>
                                    <Label text="✓" styleClass="profile-status-icon"/>
                                </StackPane>
                            </StackPane>
                            
                            <!-- Username and Tag Area -->
                            <VBox styleClass="profile-username-container">
                                <HBox alignment="CENTER_LEFT" spacing="5">
                                    <Label fx:id="nomPrenomLabel" text="Nom et Prenom" styleClass="profile-username"/>
                                    <HBox styleClass="profile-tag-container">
                                        <Label fx:id="cinLabel" text="" styleClass="profile-tag"/>
                                    </HBox>
                                </HBox>
                                <HBox styleClass="profile-badge-container" spacing="5">
                                    <Label text="Candidat" styleClass="profile-badge"/>
                                    <Label fx:id="typePermisLabel" text="" styleClass="profile-badge-permis"/>
                                </HBox>
                            </VBox>
                        </HBox>
                        
                        <!-- Profile-like info section -->
                        <VBox styleClass="profile-about-section">
                            <Label text="À PROPOS" styleClass="profile-section-title"/>
                            
                            <!-- Info rows with text icons -->
                            <HBox styleClass="profile-info-row">
                                <Label text="📧" styleClass="profile-info-icon"/>
                                <Label text="Email:" styleClass="profile-info-label"/>
                                <Label fx:id="emailLabel" text="" styleClass="profile-info-value"/>
                            </HBox>
                            
                            <HBox styleClass="profile-info-row">
                                <Label text="📱" styleClass="profile-info-icon"/>
                                <Label text="Téléphone:" styleClass="profile-info-label"/>
                                <Label fx:id="telephoneLabel" text="" styleClass="profile-info-value"/>
                            </HBox>
                            
                            <HBox styleClass="profile-info-row">
                                <Label text="🏠" styleClass="profile-info-icon"/>
                                <Label text="Adresse:" styleClass="profile-info-label"/>
                                <Label fx:id="adresseLabel" text="" styleClass="profile-info-value"/>
                            </HBox>
                            
                            <HBox styleClass="profile-info-row">
                                <Label text="🎂" styleClass="profile-info-icon"/>
                                <Label text="Date Naissance:" styleClass="profile-info-label"/>
                                <Label fx:id="dateNaissanceLabel" text="" styleClass="profile-info-value"/>
                            </HBox>
                        </VBox>
                        
                        <!-- Activity Status Section -->
                        <HBox styleClass="profile-activity-section">
                            <Label text="📋" styleClass="profile-activity-icon"/>
                            <Label text="Dossier actif depuis le 15 avril 2025" styleClass="profile-activity-status"/>
                        </HBox>
                    </VBox>

                    <!-- Documents Card -->
                    <VBox styleClass="glass-card" spacing="15">
                        <padding>
                            <Insets top="20" right="20" bottom="20" left="20"/>
                        </padding>

                        <HBox alignment="CENTER_LEFT" spacing="10" styleClass="panel-header">
                            <Label text="📄" styleClass="document-icon"/>
                            <Label text="Documents Fournis" styleClass="panel-title">
                                <font>
                                    <Font name="System Bold" size="16"/>
                                </font>
                            </Label>
                        </HBox>

                        <Separator styleClass="glass-separator"/>

                        <!-- CIN Documents -->
                        <VBox styleClass="glass-document-group">
                            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="document-header">
                                <Label text="🪪" styleClass="document-type-icon"/>
                                <Label text="Carte d'identité" styleClass="document-title"/>
                            </HBox>
                            <VBox fx:id="cinDocumentsContainer" spacing="10" styleClass="document-list"/>
                        </VBox>

                        <!-- Permis Documents -->
                        <VBox styleClass="glass-document-group">
                            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="document-header">
                                <Label text="🚗" styleClass="document-type-icon"/>
                                <Label text="Permis de conduire" styleClass="document-title"/>
                            </HBox>
                            <VBox fx:id="permisDocumentsContainer" spacing="10" styleClass="document-list"/>
                        </VBox>

                        <!-- Medical Documents -->
                        <VBox styleClass="glass-document-group">
                            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="document-header">
                                <Label text="🏥" styleClass="document-type-icon"/>
                                <Label text="Certificats médicaux" styleClass="document-title"/>
                            </HBox>
                            <VBox fx:id="medicalDocumentsContainer" spacing="10" styleClass="document-list"/>
                        </VBox>

                        <!-- Other Documents -->
                        <VBox styleClass="glass-document-group">
                            <HBox alignment="CENTER_LEFT" spacing="10" styleClass="document-header">
                                <Label text="📑" styleClass="document-type-icon"/>
                                <Label text="Autres documents" styleClass="document-title"/>
                            </HBox>
                            <VBox fx:id="otherDocumentsContainer" spacing="10" styleClass="document-list"/>
                        </VBox>
                    </VBox>
                </VBox>
            </ScrollPane>
        </SplitPane>


    </center>
    </BorderPane>

</StackPane>
