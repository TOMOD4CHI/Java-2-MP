<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.cpi2.controllers.ConfirmerSeance"
            stylesheets="@/css/style.css"
            styleClass="root">

    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <top>
        <VBox alignment="CENTER" spacing="10">
            <Label text="Confirmer les Séances de Conduite" styleClass="page-title"/>
            <Separator />
        </VBox>
    </top>

    <center>
        <VBox spacing="20">
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Filtrer par date:" styleClass="form-label"/>
                <DatePicker fx:id="filterDate" promptText="Sélectionner une date" styleClass="form-field"/>
                <Button text="Appliquer" onAction="#handleApplyFilter" styleClass="button, action-button"/>
                <Button text="Réinitialiser" onAction="#handleResetFilter" styleClass="button, cancel-button"/>
                <Region HBox.hgrow="ALWAYS"/>
                <ChoiceBox fx:id="statusFilter" styleClass="form-field"/>
            </HBox>
            
            <TableView fx:id="seancesTable" VBox.vgrow="ALWAYS" styleClass="custom-table-view">
                <columns>
                    <TableColumn fx:id="dateColumn" text="Date" prefWidth="100"/>
                    <TableColumn fx:id="heureColumn" text="Heure" prefWidth="80"/>
                    <TableColumn fx:id="dureeColumn" text="Durée" prefWidth="80"/>
                    <TableColumn fx:id="candidatColumn" text="Candidat" prefWidth="150"/>
                    <TableColumn fx:id="moniteurColumn" text="Moniteur" prefWidth="150"/>
                    <TableColumn fx:id="vehiculeColumn" text="Véhicule" prefWidth="100"/>
                    <TableColumn fx:id="lieuColumn" text="Lieu de départ" prefWidth="150"/>
                    <TableColumn fx:id="statusColumn" text="Statut" prefWidth="100"/>
                    <TableColumn fx:id="actionsColumn" text="Actions" prefWidth="150"/>
                </columns>
            </TableView>
        </VBox>
    </center>
    
    <right>
        <VBox fx:id="detailPane" spacing="15" prefWidth="350" styleClass="form-container">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            
            <Label text="Détails de la séance" styleClass="form-section-title"/>
            
            <GridPane hgap="10" vgap="10">
                <columnConstraints>
                    <ColumnConstraints prefWidth="120"/>
                    <ColumnConstraints hgrow="ALWAYS"/>
                </columnConstraints>
                
                <Label text="Date:" styleClass="form-label" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                <Label fx:id="detailDateLabel" text="-" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                
                <Label text="Heure:" styleClass="form-label" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                <Label fx:id="detailHeureLabel" text="-" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                
                <Label text="Durée:" styleClass="form-label" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                <Label fx:id="detailDureeLabel" text="-" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                
                <Label text="Candidat:" styleClass="form-label" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                <Label fx:id="detailCandidatLabel" text="-" GridPane.rowIndex="3" GridPane.columnIndex="1"/>
                
                <Label text="Moniteur:" styleClass="form-label" GridPane.rowIndex="4" GridPane.columnIndex="0"/>
                <Label fx:id="detailMoniteurLabel" text="-" GridPane.rowIndex="4" GridPane.columnIndex="1"/>
                
                <Label text="Véhicule:" styleClass="form-label" GridPane.rowIndex="5" GridPane.columnIndex="0"/>
                <Label fx:id="detailVehiculeLabel" text="-" GridPane.rowIndex="5" GridPane.columnIndex="1"/>
                
                <Label text="Lieu de départ:" styleClass="form-label" GridPane.rowIndex="6" GridPane.columnIndex="0"/>
                <Label fx:id="detailLieuLabel" text="-" GridPane.rowIndex="6" GridPane.columnIndex="1"/>
                
                <Label text="Statut actuel:" styleClass="form-label" GridPane.rowIndex="7" GridPane.columnIndex="0"/>
                <Label fx:id="detailStatusLabel" text="-" styleClass="status-label" GridPane.rowIndex="7" GridPane.columnIndex="1"/>
            </GridPane>
            
            <Separator>
                <VBox.margin>
                    <Insets top="10" bottom="10"/>
                </VBox.margin>
            </Separator>
            
            <Label text="Mettre à jour le statut" styleClass="form-section-title"/>
            
            <VBox spacing="10">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Label text="Nouveau statut:" styleClass="form-label"/>
                    <ComboBox fx:id="statusComboBox" promptText="Sélectionner un statut" styleClass="form-field" HBox.hgrow="ALWAYS"/>
                </HBox>
                
                <Label text="Notes / Commentaires:" styleClass="form-label"/>
                <TextArea fx:id="notesArea" promptText="Ajouter des notes sur la séance..." 
                          wrapText="true" prefHeight="80" styleClass="form-field"/>
                
                <HBox fx:id="kilometrageBox" spacing="10" alignment="CENTER_LEFT" visible="false" managed="false">
                    <Label text="Kilométrage final:" styleClass="form-label"/>
                    <TextField fx:id="kmFinField" promptText="Km" styleClass="form-field"/>
                </HBox>
                
                <HBox alignment="CENTER" spacing="10" style="-fx-padding: 10 0 0 0;">
                    <Button text="Fermer" onAction="#handleClose" styleClass="button, cancel-button" prefWidth="120"/>
                    <Button fx:id="updateButton" text="Mettre à jour" onAction="#handleUpdate" 
                            styleClass="button, submit-button" prefWidth="120" disable="true"/>
                </HBox>
            </VBox>
        </VBox>
    </right>
</BorderPane> 