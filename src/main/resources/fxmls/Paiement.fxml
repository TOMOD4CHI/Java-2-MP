<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.cpi2.controllers.Paiement"
            stylesheets="@/css/style1.css"
            styleClass="root"
            prefWidth="1400"
            prefHeight="900">

    <padding>
        <Insets top="20" right="20"  left="20"/>
    </padding>

    <top>
        <HBox alignment="CENTER_LEFT" spacing="20" styleClass="header-container">
            <Label text="Gestion des Paiements" styleClass="form-title" HBox.hgrow="ALWAYS"/>
            <HBox alignment="CENTER_RIGHT" spacing="5" styleClass="navigation-tabs">
                <ToggleButton fx:id="ajouterTab" text="Ajouter"
                              selected="true"
                              styleClass="button"/>
                <ToggleButton fx:id="afficherTab" text="Afficher"
                              styleClass="button"/>
            </HBox>
        </HBox>
    </top>
    <center>
        <StackPane fx:id="contentStack">
            <VBox fx:id="ajouterView" styleClass="form-container" spacing="15">
                <padding>
                    <Insets top="20" right="20"  left="20"/>
                </padding>

                <GridPane hgap="15" vgap="10" styleClass="form-grid">
                    <Label text="Type:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="0"/>
                    <ComboBox fx:id="typeComboBox" promptText="Sélectionner un type"
                              styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="0"
                              GridPane.hgrow="ALWAYS"/>

                    <Label text="Candidat:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="1"/>
                    <ComboBox fx:id="candidatComboBox" promptText="Sélectionner un candidat"
                              styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="1"
                              GridPane.hgrow="ALWAYS"/>

                    <Label text="Montant:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="2"/>
                    <TextField fx:id="montantField" promptText="0.00 DT"
                               styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="2"
                               GridPane.hgrow="ALWAYS"/>

                    <Label text="Date:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="3"/>
                    <DatePicker fx:id="datePicker" promptText="Sélectionner une date"
                                styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="3"
                                GridPane.hgrow="ALWAYS"/>

                    <Label text="Méthode:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="4"/>
                    <ComboBox fx:id="methodeComboBox" promptText="Sélectionner une méthode"
                              styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="4"
                              GridPane.hgrow="ALWAYS"/>
                    <Label text="Mode:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="5"/>
                    <ComboBox fx:id="modeComboBox" promptText="Sélectionner un mode "
                              styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="5"
                              GridPane.hgrow="ALWAYS"/>

                    <Label text="Description:" styleClass="form-label" GridPane.columnIndex="0" GridPane.rowIndex="6"
                           GridPane.valignment="TOP"/>
                    <TextArea fx:id="descriptionArea" promptText="Description du paiement"
                              styleClass="form-field" GridPane.columnIndex="1" GridPane.rowIndex="6"
                              GridPane.hgrow="ALWAYS" prefHeight="80"/>
                </GridPane>

                <HBox spacing="15" alignment="CENTER" styleClass="action-button-container">
                    <Button text="Annuler" onAction="#handleCancel"
                            styleClass="button, cancel-button" HBox.hgrow="ALWAYS"/>
                    <Button text="Enregistrer" onAction="#handleSave"
                            styleClass="button, submit-button" HBox.hgrow="ALWAYS"/>
                </HBox>
            </VBox>

            <VBox fx:id="afficherView" styleClass="table-container" spacing="15" visible="false" managed="false">
                <padding>
                    <Insets top="20" right="0" bottom="20" left="20"/>
                </padding>

                <HBox alignment="CENTER_LEFT" spacing="15">
                    <Label text="Rechercher des paiements" styleClass="form-section-title" HBox.hgrow="ALWAYS"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Label fx:id="totalLabel" text="Total: 0.00 DT" styleClass="total-label"/>
                </HBox>

                <HBox spacing="15" alignment="CENTER_LEFT">
                    <Label text="Période:" styleClass="form-label"/>
                    <DatePicker fx:id="startDatePicker" promptText="Date début" styleClass="form-field"/>
                    <Label text="à" styleClass="form-label"/>
                    <DatePicker fx:id="endDatePicker" promptText="Date fin" styleClass="form-field"/>
                    <ComboBox fx:id="searchCandidatComboBox" promptText="Tous les candidats"
                              styleClass="form-field" HBox.hgrow="ALWAYS"/>
                    <Button text="Rechercher" onAction="#handleSearch"
                            styleClass="button, action-button"/>
                </HBox>

                <TableView fx:id="paiementsTable" styleClass="custom-table-view" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="dateColumn" text="Date" prefWidth="100" />
                        <TableColumn fx:id="candidatColumn" text="Candidat" prefWidth="150" />
                        <TableColumn fx:id="typeColumn" text="Type" prefWidth="150" />
                        <TableColumn fx:id="montantColumn" text="Montant" prefWidth="100" />
                        <TableColumn fx:id="methodeColumn" text="Méthode" prefWidth="100" />
                        <TableColumn fx:id="descriptionColumn" text="Description" prefWidth="200" />
                        <TableColumn fx:id="actionsColumn" text="Actions" prefWidth="350" />
                    </columns>
                </TableView>

                <HBox alignment="CENTER_RIGHT" spacing="15">
                    <Button fx:id="printButton" text="Imprimer" onAction="#handlePrint"
                            styleClass="button, action-button" HBox.hgrow="ALWAYS"/>
                    <Button fx:id="exportButton" text="Exporter" onAction="#handleExport"
                            styleClass="button, action-button" HBox.hgrow="ALWAYS"/>
                </HBox>
            </VBox>
        </StackPane>
    </center>
</BorderPane>