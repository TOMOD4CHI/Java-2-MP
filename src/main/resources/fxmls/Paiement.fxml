<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="org.cpi2.controllers.Paiement"
            stylesheets="@/css/style.css"
            styleClass="root">

    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <top>
        <VBox alignment="CENTER" spacing="10">
            <Label text="Gestion des Paiements" styleClass="page-title"/>
            <Separator />
        </VBox>
    </top>

    <left>
        <VBox spacing="15" prefWidth="350" styleClass="form-container">
            <padding>
                <Insets top="20" right="20" bottom="20" left="20"/>
            </padding>
            
            <Label text="Enregistrer un nouveau paiement" styleClass="form-section-title"/>
            
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Type:" styleClass="form-label" prefWidth="100"/>
                <ComboBox fx:id="typeComboBox" promptText="Sélectionner un type" styleClass="form-field" HBox.hgrow="ALWAYS"/>
            </HBox>
            
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Candidat:" styleClass="form-label" prefWidth="100"/>
                <ComboBox fx:id="candidatComboBox" promptText="Sélectionner un candidat" styleClass="form-field" HBox.hgrow="ALWAYS"/>
            </HBox>
            
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Montant:" styleClass="form-label" prefWidth="100"/>
                <TextField fx:id="montantField" promptText="0.00 DT" styleClass="form-field" HBox.hgrow="ALWAYS"/>
            </HBox>
            
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Date:" styleClass="form-label" prefWidth="100"/>
                <DatePicker fx:id="datePicker" promptText="Sélectionner une date" styleClass="form-field" HBox.hgrow="ALWAYS"/>
            </HBox>
            
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Méthode:" styleClass="form-label" prefWidth="100"/>
                <ComboBox fx:id="methodeComboBox" promptText="Sélectionner une méthode" styleClass="form-field" HBox.hgrow="ALWAYS"/>
            </HBox>
            
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Description:" styleClass="form-label" prefWidth="100"/>
                <TextArea fx:id="descriptionArea" promptText="Description du paiement" styleClass="form-field" 
                          wrapText="true" prefHeight="60" HBox.hgrow="ALWAYS"/>
            </HBox>
            
            <HBox spacing="10" alignment="CENTER" style="-fx-padding: 10 0 0 0;">
                <Button text="Annuler" onAction="#handleCancel" styleClass="button, cancel-button" prefWidth="120"/>
                <Button text="Enregistrer" onAction="#handleSave" styleClass="button, submit-button" prefWidth="120"/>
            </HBox>
            
            <Separator>
                <VBox.margin>
                    <Insets top="20" bottom="20"/>
                </VBox.margin>
            </Separator>
            
            <Label text="Rechercher des paiements" styleClass="form-section-title"/>
            
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Période:" styleClass="form-label" prefWidth="100"/>
                <DatePicker fx:id="startDatePicker" promptText="Date début" styleClass="form-field" prefWidth="110"/>
                <Label text="à" styleClass="form-label" alignment="CENTER"/>
                <DatePicker fx:id="endDatePicker" promptText="Date fin" styleClass="form-field" prefWidth="110"/>
            </HBox>
            
            <HBox spacing="10" alignment="CENTER_LEFT">
                <Label text="Candidat:" styleClass="form-label" prefWidth="100"/>
                <ComboBox fx:id="searchCandidatComboBox" promptText="Tous les candidats" styleClass="form-field" HBox.hgrow="ALWAYS"/>
            </HBox>
            
            <HBox spacing="10" alignment="CENTER">
                <Button text="Rechercher" onAction="#handleSearch" styleClass="button, action-button" prefWidth="150"/>
            </HBox>
        </VBox>
    </left>

    <center>
        <VBox spacing="10" styleClass="table-container">
            <padding>
                <Insets top="20" right="0" bottom="20" left="20"/>
            </padding>
            
            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label text="Historique des paiements" styleClass="table-title"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label fx:id="totalLabel" text="Total: 0.00 DT" styleClass="total-label"/>
            </HBox>
            
            <TableView fx:id="paiementsTable" VBox.vgrow="ALWAYS" styleClass="custom-table-view">
                <columns>
                    <TableColumn fx:id="dateColumn" text="Date" prefWidth="100"/>
                    <TableColumn fx:id="candidatColumn" text="Candidat" prefWidth="150"/>
                    <TableColumn fx:id="typeColumn" text="Type" prefWidth="150"/>
                    <TableColumn fx:id="montantColumn" text="Montant" prefWidth="100"/>
                    <TableColumn fx:id="methodeColumn" text="Méthode" prefWidth="100"/>
                    <TableColumn fx:id="descriptionColumn" text="Description" prefWidth="200"/>
                    <TableColumn fx:id="actionsColumn" text="Actions" prefWidth="100"/>
                </columns>
            </TableView>
            
            <HBox alignment="CENTER_RIGHT" spacing="10">
                <Button fx:id="printButton" text="Imprimer" onAction="#handlePrint" styleClass="button, action-button"/>
                <Button fx:id="exportButton" text="Exporter" onAction="#handleExport" styleClass="button, action-button"/>
            </HBox>
        </VBox>
    </center>
</BorderPane> 