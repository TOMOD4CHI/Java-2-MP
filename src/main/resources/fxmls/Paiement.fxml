<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.DatePicker?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.ScrollPane?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.TextArea?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.VBox?>

<BorderPane prefHeight="800" prefWidth="1419.0" styleClass="root" stylesheets="@/css/style.css" xmlns="http://javafx.com/javafx/23.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="org.cpi2.controllers.Paiement">

    <padding>
        <Insets bottom="20" left="20" right="20" top="20" />
    </padding>

    <top>
        <VBox alignment="CENTER" spacing="10">
            <Label styleClass="page-title" text="Gestion des Paiements" />
            <Separator />
        </VBox>
    </top>

    <left>
        <ScrollPane fitToWidth="true" hbarPolicy="NEVER" prefHeight="729.0" prefWidth="534.0">
            <VBox maxWidth="400" spacing="15" styleClass="form-container">
                <padding>
                    <Insets bottom="20" left="20" right="20" top="20" />
                </padding>

                <Label styleClass="form-section-title" text="Enregistrer un nouveau paiement" />

                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label prefWidth="100" styleClass="form-label" text="Type:" />
                    <ComboBox fx:id="typeComboBox" promptText="Sélectionner un type" styleClass="form-field" HBox.hgrow="ALWAYS" />
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label prefWidth="100" styleClass="form-label" text="Candidat:" />
                    <ComboBox fx:id="candidatComboBox" promptText="Sélectionner un candidat" styleClass="form-field" HBox.hgrow="ALWAYS" />
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label prefWidth="100" styleClass="form-label" text="Montant:" />
                    <TextField fx:id="montantField" promptText="0.00 DT" styleClass="form-field" HBox.hgrow="ALWAYS" />
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label prefWidth="100" styleClass="form-label" text="Date:" />
                    <DatePicker fx:id="datePicker" promptText="Sélectionner une date" styleClass="form-field" HBox.hgrow="ALWAYS" />
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label prefWidth="100" styleClass="form-label" text="Méthode:" />
                    <ComboBox fx:id="modeComboBox" promptText="Sélectionner une méthode" styleClass="form-field" HBox.hgrow="ALWAYS" />
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label prefWidth="100" styleClass="form-label" text="Description:" />
                    <TextArea fx:id="descriptionArea" prefHeight="60" prefWidth="296.0" promptText="Description du paiement" styleClass="form-field" wrapText="true" HBox.hgrow="ALWAYS" />
                </HBox>

                <HBox alignment="CENTER" spacing="10" style="-fx-padding: 10 0 0 0;">
                    <Button prefWidth="120" styleClass="button, cancel-button" text="Annuler" />
                    <Button onAction="#handleSavePayment" prefWidth="120" styleClass="button, submit-button" text="Enregistrer" />
                </HBox>

                <Separator>
                    <VBox.margin>
                        <Insets bottom="20" top="20" />
                    </VBox.margin>
                </Separator>

                <Label styleClass="form-section-title" text="Rechercher des paiements" />

                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label prefWidth="100" styleClass="form-label" text="Période:" />
                    <DatePicker fx:id="startDatePicker" prefWidth="110" promptText="Date début" styleClass="form-field" />
                    <Label alignment="CENTER" styleClass="form-label" text="à" />
                    <DatePicker fx:id="endDatePicker" prefWidth="110" promptText="Date fin" styleClass="form-field" />
                </HBox>

                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label prefWidth="100" styleClass="form-label" text="Candidat:" />
                    <ComboBox fx:id="searchCandidatComboBox" promptText="Tous les candidats" styleClass="form-field" HBox.hgrow="ALWAYS" />
                </HBox>

                <HBox alignment="CENTER" spacing="10">
                    <Button onAction="#handleSearch" prefWidth="150" styleClass="button, action-button" text="Rechercher" />
                </HBox>
            </VBox>
        </ScrollPane>
    </left>

    <center>
        <VBox prefHeight="729.0" prefWidth="997.0" spacing="10" styleClass="table-container">
            <padding>
                <Insets bottom="20" left="20" right="0" top="20" />
            </padding>

            <HBox alignment="CENTER_LEFT" spacing="10">
                <Label styleClass="table-title" text="Historique des paiements" />
                <Region HBox.hgrow="ALWAYS" />
                <Label fx:id="totalLabel" styleClass="total-label" text="Total: 0.00 DT" />
            </HBox>

            <ScrollPane fitToHeight="true" fitToWidth="true" VBox.vgrow="ALWAYS">
                <TableView fx:id="paiementsTable" prefHeight="622.0" prefWidth="534.0" styleClass="custom-table-view">
                    <columns>
                        <TableColumn fx:id="dateColumn" prefWidth="100" text="Date" />
                        <TableColumn fx:id="candidatColumn" prefWidth="150" text="Candidat" />
                        <TableColumn fx:id="typeColumn" prefWidth="97.59986877441406" text="Type" />
                        <TableColumn fx:id="montantColumn" prefWidth="110.39990234375" text="Montant" />
                        <TableColumn fx:id="methodeColumn" prefWidth="105.60018920898438" text="Méthode" />
                        <TableColumn fx:id="descriptionColumn" prefWidth="114.4000244140625" text="Description" />
                        <TableColumn fx:id="actionsColumn" prefWidth="206.4000244140625" text="Actions" />
                    </columns>
                </TableView>
            </ScrollPane>

            <HBox alignment="CENTER_RIGHT" spacing="10">
                <Button fx:id="printButton" styleClass="button, action-button" text="Imprimer" />
                <Button fx:id="exportButton" styleClass="button, action-button" text="Exporter" />
            </HBox>
        </VBox>
    </center>
</BorderPane>
